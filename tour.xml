
<krpano version="1.17.1" title="Return of the Native" onstart="startup();">

  <!--	<include url="skin/vtourskin.xml" />-->


  <plugin name="soundinterface" url="plugins/soundinterface.js" preload="true" rootpath="assets/audio/" volume="1.0" mute="false" />
  <action name="startup">
    if(startscene === null, copy(startscene,scene[0].name)); loadscene(get(startscene), null, MERGE);
  </action>
<!--  INTRO SCENE-->
  <scene name="intro" title="The Chant" onstart="playsound(intro_background, 'boy-chant.mp3'); playsound(intro_backgrount, 'hakalau-forest.mp3');" thumburl="assets/panos/intro.tiles/thumb.jpg" lat="19.78840833" lng="-155.31670833" heading="187.5">

    <view hlookat="0" vlookat="0" fovtype="VFOV" fov="120" maxpixelzoom="2.0" fovmin="70" fovmax="140" limitview="auto" />

    <preview url="assets/panos/intro.tiles/preview.jpg" />

    <image type="CUBE" multires="true" tilesize="512" progressive="false">
      <level tiledimagewidth="1896" tiledimageheight="1896">
        <cube url="assets/panos/intro.tiles/%s/l3/%v/l3_%s_%v_%h.jpg" />
      </level>
      <level tiledimagewidth="948" tiledimageheight="948">
        <cube url="assets/panos/intro.tiles/%s/l2/%v/l2_%s_%v_%h.jpg" />
      </level>
      <level tiledimagewidth="512" tiledimageheight="512">
        <cube url="assets/panos/intro.tiles/%s/l1/%v/l1_%s_%v_%h.jpg" />
      </level>
      <mobile>
        <cube url="assets/panos/intro.tiles/mobile_%s.jpg" />
      </mobile>
    </image>

    <autorotate enabled="true" waittime="7.0" speed="20.0" />
    <!-- hotspot style predefines - white hotspot -->
    <style name="hotspot_ani_white" url="skin/hotspot_ani_white_64x64x20.png" crop="0|0|64|64" framewidth="64" frameheight="64" frame="0" lastframe="19" onloaded="hotspot_animate();" />

    <!-- hotspot animation action -->
    <action name="hotspot_animate">
      inc(frame,1,get(lastframe),0); mul(ypos,frame,frameheight);     
      txtadd(crop,'0|',get(ypos),'|',get(framewidth),'|',get(frameheight)); delayedcall(0.03, if(loaded, hotspot_animate() ) );
    </action>

    <!-- hotspots -->
    <hotspot name="intro-path" style="hotspot_ani_white" ath="+89" atv="-10" onclick="loadscene('scene_one', null, MERGE, BLEND(2));" />
    <!-- intro image -->
    <events name="panoevents" onloadcomplete="delayedcall(introimage, 4.0, if(layer[introimage], hideintroimage() ); ); set(events[panoevents].onloadcomplete,null);" onremovepano="stopdelayedcall(introimage);" />

    <layer name="introimage" url="assets/intro.png" align="center" onloaded="set(alpha,0); tween(alpha,1.0);" onclick="hideintroimage();" />

    <action name="hideintroimage">
      if(layer[introimage].enabled, set(layer[introimage].enabled,false); tween(layer[introimage].alpha, 0.0, 3.0, default,         
      removelayer(introimage)); );
    </action>
  </scene>
  
<!-- SCENE ONE -->
  <scene name="scene_one" title="The Iiwi" onstart="pausesound(intro_background); playsound(scene_one_background, 'jack_clermontia_story.mp4|jack_clermontia_story.ogg');" thumburl="assets/panos/intro.tiles/thumb.jpg" lat="20" lng="-155" heading="187.5">

    <view hlookat="0" vlookat="0" fovtype="VFOV" fov="120" maxpixelzoom="2.0" fovmin="70" fovmax="140" limitview="auto" />

    <preview url="assets/panos/scene_one.tiles/preview.jpg" />

    <image type="CUBE" multires="true" tilesize="512" progressive="false">
      <level tiledimagewidth="1896" tiledimageheight="1896">
        <cube url="assets/panos/scene_one.tiles/%s/l3/%v/l3_%s_%v_%h.jpg" />
      </level>
      <level tiledimagewidth="948" tiledimageheight="948">
        <cube url="assets/panos/scene_one.tiles/%s/l2/%v/l2_%s_%v_%h.jpg" />
      </level>
      <level tiledimagewidth="512" tiledimageheight="512">
        <cube url="assets/panos/scene_one.tiles/%s/l1/%v/l1_%s_%v_%h.jpg" />
      </level>
      <mobile>
        <cube url="assets/panos/scene_one.tiles/mobile_%s.jpg" />
      </mobile>
    </image>

    <!-- hotspot style predefines - black hotspot -->
    <style name="hotspot_ani_black" url="skin/hotspot_ani_black_64x64x20.png" crop="0|0|64|64" framewidth="64" frameheight="64" frame="0" lastframe="19" onloaded="hotspot_animate();" />

    <!-- hotspot style predefines - white hotspot -->
    <style name="hotspot_ani_white" url="skin/hotspot_ani_white_64x64x20.png" crop="0|0|64|64" framewidth="64" frameheight="64" frame="0" lastframe="19" onloaded="hotspot_animate();" />

    <!-- hotspot animation action -->
    <action name="hotspot_animate">
      inc(frame,1,get(lastframe),0); mul(ypos,frame,frameheight); txtadd(crop,'0|',get(ypos),'|',get(framewidth),'|',get(frameheight)); delayedcall(0.03, if(loaded, hotspot_animate() ) );
    </action>




    <!-- hotspots -->
    <hotspot name="iiwi1" style="hotspot_ani_white" ath="+89" atv="-10" onclick="playsound(bird, 'iiwi-1.mp4');" />
    <hotspot name="iiwi2" style="hotspot_ani_white" ath="+15" atv="-10" onclick="playsound(bird, 'iiwi-2.mp4');" />
    <hotspot name="iiwi3" style="hotspot_ani_white" ath="+82" atv="25" onclick="playsound(bird, 'iiwi-3.mp4');" />
  </scene>
<krpano version="1.17.1" title="Return of the Natives" onstart="startup();">

	<include url="skin/vtourskin.xml" />

	<!-- set skin settings: bingmaps? gyro? thumbnail controlling? tooltips? -->
	<skin_settings bingmaps="false"
	               bingmaps_key=""
	               bingmaps_zoombuttons="false"
	               gyro="true"
	               thumbs_width="120" thumbs_height="80" thumbs_padding="10" thumbs_crop="0|40|240|160"
	               thumbs_opened="false"
	               thumbs_text="false"
	               thumbs_dragging="true"
	               thumbs_onhoverscrolling="false"
	               thumbs_scrollbuttons="false"
	               thumbs_scrollindicator="false"
	               thumbs_loop="false"
	               tooltips_thumbs="false"
	               tooltips_hotspots="false"
	               tooltips_mapspots="false"
	               controlbar_offset="20"
	               />

	<!-- set optional skin logo url -->
	<layer name="skin_logo" url="" scale="0.25" opened_onclick="openurl('...',_blank);" />

  <plugin name="soundinterface"
        url="plugins/soundinterface.swf"
        alturl="plugins/soundinterface.js"
        preload="true"
        rootpath=""
        volume="1.0"
        mute="false"
        />
	<action name="startup">
		if(startscene === null, copy(startscene,scene[0].name));
		loadscene(get(startscene), null, MERGE);
		playsound(bg, background.mp3|background.wav);
	</action>

	
	<scene name="scene_IMG_3051" title="The Pathway" onstart="" thumburl="assets/panos/IMG_3051.tiles/thumb.jpg" lat="19.78840833" lng="-155.31670833" heading="187.5">

		<view hlookat="0" vlookat="0" fovtype="MFOV" fov="120" maxpixelzoom="2.0" fovmin="70" fovmax="140" limitview="auto" />

		<preview url="assets/panos/IMG_3051.tiles/preview.jpg" />

		<image type="CUBE" multires="true" tilesize="512" progressive="false">
			<level tiledimagewidth="1896" tiledimageheight="1896">
				<cube url="assets/panos/IMG_3051.tiles/%s/l3/%v/l3_%s_%v_%h.jpg" />
			</level>
			<level tiledimagewidth="948" tiledimageheight="948">
				<cube url="assets/panos/IMG_3051.tiles/%s/l2/%v/l2_%s_%v_%h.jpg" />
			</level>
			<level tiledimagewidth="512" tiledimageheight="512">
				<cube url="assets/panos/IMG_3051.tiles/%s/l1/%v/l1_%s_%v_%h.jpg" />
			</level>
			<mobile>
				<cube url="assets/panos/IMG_3051.tiles/mobile_%s.jpg" />
			</mobile>
		</image>

		<!-- hotspot style predefines - black hotspot -->
	<style name="hotspot_ani_black"
	       url="skin/hotspot_ani_black_64x64x20.png"
	       crop="0|0|64|64"
	       framewidth="64" frameheight="64" frame="0" lastframe="19"
	       onloaded="hotspot_animate();"
	       />

	<!-- hotspot style predefines - white hotspot -->
	<style name="hotspot_ani_white"
	       url="skin/hotspot_ani_white_64x64x20_opt.png"
	       crop="0|0|64|64"
	       framewidth="64" frameheight="64" frame="0" lastframe="19"
	       onloaded="hotspot_animate();"
	       />

	<!-- hotspot animation action -->
	<action name="hotspot_animate">
		inc(frame,1,get(lastframe),0);
		mul(ypos,frame,frameheight);
		txtadd(crop,'0|',get(ypos),'|',get(framewidth),'|',get(frameheight));
		delayedcall(0.06, if(loaded, hotspot_animate() ) );
	</action>
	

	
	
	<!-- hotspots -->
	<hotspot name="forestSound" style="hotspot_ani_white" ath="+15" atv="-10" onclick="showlog(); trace('hotspot ',get(name),' clicked'); playsound(); js( alert ('test') );" />
	<hotspot name="spot2" style="hotspot_ani_black" ath="-15" atv="+10" onclick="showlog(); trace('hotspot ',get(name),' clicked'); js( showbird() );" />
	<hotspot name="spot3" style="hotspot_ani_white" ath="-15" atv="+15" onclick="showlog(); trace('hotspot ',get(name),' clicked'); js( showbirdVideo() ); " />

	</scene>




</krpano>
